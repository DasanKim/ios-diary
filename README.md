# ì¼ê¸°ì¥ 

- í”„ë¡œì íŠ¸ ê¸°ê°„: [2023ë…„ 8ì›” 28ì¼ ~ 9ì›” 15ì¼](https://github.com/YaRkyungmin/ios-diary/wiki/íƒ€ì„ë¼ì¸-ğŸ“‹)
- í”„ë¡œì íŠ¸ íŒ€ì›: [kyungminğŸ¼](https://github.com/YaRkyungmin), [DasanğŸŒ³](https://github.com/DasanKim)
- í”„ë¡œì íŠ¸ ë¦¬ë·°ì–´: ì œì„ìŠ¤

---
## ğŸ“– ëª©ì°¨
ğŸ€ [ì†Œê°œ](#ì†Œê°œ) </br>
ğŸ’» [ì‹¤í–‰ í™”ë©´](#ì‹¤í–‰_í™”ë©´) </br>
ğŸ› ï¸ [ì‚¬ìš© ê¸°ìˆ ](#ì‚¬ìš©_ê¸°ìˆ ) </br>
ğŸ‘€ [ë‹¤ì´ì–´ê·¸ë¨](#Diagram) </br>
ğŸ§¨ [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”_ìŠˆíŒ…) </br>
ğŸ“š [ì°¸ê³  ë§í¬](#ì°¸ê³ _ë§í¬) </br>
ğŸ‘©â€ğŸ‘§â€ğŸ‘§ [about TEAM](#about_TEAM) </br>

</br>

## ğŸ€ ì†Œê°œ<a id="ì†Œê°œ"></a>
- ì¼ê¸°ë¥¼ ì‘ì„±, ìˆ˜ì •, ì €ì¥ í•  ìˆ˜ ìˆëŠ” ì¼ê¸°ì¥ ì•±ì…ë‹ˆë‹¤.

</br>

## ğŸ’» ì‹¤í–‰ í™”ë©´<a id="ì‹¤í–‰_í™”ë©´"></a>

| ìƒˆë¡œìš´ ì¼ê¸°ì¥ ì¶”ê°€ í™”ë©´ | ê¸°ì¡´ ì¼ê¸°ì¥ í¸ì§‘ í™”ë©´ |
| :--------: | :--------: |
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970463513936052/1._.gif" width = "200"> | <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970497819156530/2._.gif"  width = "200"> |

<details>
        <summary> ì¶”ê°€ ì‹¤í–‰í™”ë©´ í¼ì³ ë³´ê¸° </summary>

| ì¼ê¸°ì¥ ì‚­ì œ í™”ë©´ | ì¼ê¸°ì¥ ê³µìœ  í™”ë©´ |
| :--------: | :--------: |
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970525145055335/3._.gif" width = "200"> | <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970587166216212/4._.gif"  width = "200"> |

| ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ ì§„ì… í™”ë©´ | ì œëª©ì—†ëŠ” ì¼ê¸°ì¥ |
| :--------: | :--------: |
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970612478840832/5._.gif" width = "200"> | <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152972805642670151/7._.gif"  width = "200"> |

| í™”ë©´ëª¨ë“œ ë³€ê²½ |
| :--------: | 
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1152970652672860190/6._.gif" width = "440"> | 
</details>

</br>

## ğŸ› ï¸ ì‚¬ìš© ê¸°ìˆ <a id="ì‚¬ìš©_ê¸°ìˆ "></a>
| êµ¬í˜„ ë‚´ìš©	| ë„êµ¬ |
|:---:|:---:|
|ì•„í‚¤í…ì³|MVC|
|UI|UIKit|
|Localized|Locale|
|ë¦¬ìŠ¤íŠ¸ í‘œì‹œ|Modern Collection Veiw|
|ë°ì´í„° ê´€ë¦¬|Core Data|

</br>

## ğŸ‘€ Diagram<a id="Diagram"></a>
### ğŸ“ UML
<img src = "https://github.com/YaRkyungmin/ios-diary/assets/106504779/95de7274-33b9-4562-b387-c273d5181a00.jpg" width = "800">

</br>

## ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…<a id="íŠ¸ëŸ¬ë¸”_ìŠˆíŒ…"></a>

### 1ï¸âƒ£ TextViewì™€ Keyboard
í¸ì§‘ì¤‘ì¸ í…ìŠ¤íŠ¸ê°€ í‚¤ë³´ë“œì— ì˜í•´ ê°€ë¦¬ì§€ ì•Šë„ë¡í•˜ê¸° ìœ„í•˜ì—¬ `diaryTextView`ì™€ `keyboard` ì‚¬ì´ì— ë ˆì´ì•„ì›ƒ ì„¤ì •ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

ğŸš¨ **ë¬¸ì œì ** <br>
- diaryTextViewì™€ `keyboardLayoutGuide` ì‚¬ì´ì— constraintë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¡ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.
    - í‚¤ë³´ë“œì˜ ìœ„ì¹˜ë¥¼ ì¶”ì í•˜ëŠ” `keyboardLayoutGuide`ì™€ constraintë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    - ë”ë¶ˆì–´ readabilityì— ìµœì í™”ëœ widthë¥¼ ì œê³µí•´ì£¼ëŠ” `readableContentGuide`ì™€ constraintë¥¼ ì„¤ì •í•˜ì—¬, **ê¸´ ê¸€ì„ ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆë„ë¡** í•˜ì˜€ìŠµë‹ˆë‹¤.
    ```swift
    NSLayoutConstraint.activate([
        diaryTextView.topAnchor.constraint(equalTo: view.readableContentGuide.topAnchor),
        diaryTextView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
        diaryTextView.leftAnchor.constraint(equalTo: view.readableContentGuide.leftAnchor),
        diaryTextView.rightAnchor.constraint(equalTo: view.readableContentGuide.rightAnchor)
    ])
    ```
- í•˜ì§€ë§Œ `keyboardLayoutGuide` ê°™ì€ ê²½ìš° `iOS 15`ì—ì„œë¶€í„° ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
- ì•„ë˜ì™€ ê°™ì´ `iOS15` ì´ìƒì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì´ ëŒ€ë¶€ë¶„ì´ì§€ë§Œ ê·¸ ì´í•˜ ë²„ì „ì„ ì‚¬ìš©í•˜ëŠ” `6%`ë¥¼ ìœ„í•˜ì—¬ ë‹¤ë¥¸ ë°©ë²•ì„ ëª¨ìƒ‰í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
    ![](https://hackmd.io/_uploads/B194oMyC3.png)

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- iOS 15 ì´ìƒì¼ ë•Œì™€ ê·¸ ë¯¸ë§Œ ë²„ì „ì¼ ë•Œë¥¼ ë‚˜ëˆ„ì–´ ë ˆì´ì•„ì›ƒì„ ì ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    - iOS 15ì´ìƒ: keyboardLayoutGuide ì ìš©
    - iOS 15ë¯¸ë§Œ: diaryTextViewì˜ contentInset ë³€ê²½

- iOS 15ë¯¸ë§Œì¼ ë•Œì—ëŠ” `NotificationCenter`ë¥¼ í†µí•´ í‚¤ë³´ë“œê°€ ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ˆ ë•Œë¥¼ ì¶”ì í•˜ì—¬, `diaryTextView`ì˜ `contentInset.bottom`ì„ í‚¤ë³´ë“œ ë†’ì´ë§Œí¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
    <details>
    <summary> ì½”ë“œ ë³´ê¸° </summary>
    
    ```swift
    // DiaryDetailViewController.swift
    override func viewWillAppear(_ animated: Bool) {
        if #unavailable(iOS 15.0) {
            addKeyboardObserver()
        }
    }

    private func addKeyboardObserver() {
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(keyboardWillShow),
            name: UIResponder.keyboardWillShowNotification,
            object: nil
        )
    }

    @objc private func keyboardWillShow(_ notification: Notification) {
        guard let userInfo = notification.userInfo as NSDictionary?,
              let keyboardFrame = (userInfo[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue else {
            return
        }

        diaryTextView.contentInset = UIEdgeInsets(
            top: .zero,
            left: .zero,
            bottom: keyboardFrame.size.height,
            right: .zero
        )
    }
    ```
    </details>

<br>

### 2ï¸âƒ£ Locale ì ìš©

ğŸš¨ **ë¬¸ì œì ** <br>
- Date í¬ë§·ì„ DateFormatterì˜ lacaleì„ `ko_KR`ë¡œ ì ìš©í•˜ì˜€ì„ ë•Œ ì§€ì—­í™”ê°€ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    ```swift
    dateFormatter.locale = Locale(identifier: "ko_KR")
    ```

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- **í”„ë¡œí¼í‹°ë¥¼ ì½ì„ ë‹¹ì‹œ ì‚¬ìš©ìì˜ ì§€ì—­ ì„¤ì •ì„ ë‚˜íƒ€ë‚´ëŠ”** Localeì˜ `current` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì—­í™” ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
    ```swift
    dateFormatter.locale = Locale.current.identifier
    ```
<br>

### 3ï¸âƒ£ 100Kg DiaryManager (Modelê³¼ ViewControllerì‚¬ì´ì˜ ì¤‘ê°„ ê°ì²´)

ğŸš¨ **ë¬¸ì œì ** <br>
- ê¸°ì¡´ì˜ `DiaryManager`íƒ€ì…ì—ì„œ `DiaryViewController`ì™€ `DiaryDetailViewController`ì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ëª¨ë‘ ê°€ì§€ê³  ìˆë„ë¡ êµ¬í˜„í•œ ë’¤ ê°ê°ì˜ `ViewController`ì— ì£¼ì…ì‹œì¼œì¤¬ìŠµë‹ˆë‹¤. ê°ê°ì˜ `ViewController`ì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ ë¶„ë¦¬ì‹œì¼œì¤„ ìˆ˜ ìˆì—ˆì§€ë§Œ `DiaryManager`ê°€ ë¬´ê±°ì›Œì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- ê°ê°ì˜ `ViewController`ë§ˆë‹¤ `UseCase`ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ `DiaryManager`ê°€ ê°€ì§€ê³  ìˆëŠ” ë¡œì§ì„ ë¶„ë¦¬í•´ì¤€ ë’¤, ë‹¤ë¥¸ `UseCase`ë¼ë¦¬ í†µì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” `ViewController`ì˜ `Delegate`ë¥¼ ì´ìš©í•˜ì—¬ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ `DiaryManager`ì˜ ë³µì¡ì„±ì„ ë‚®ì·„ìŠµë‹ˆë‹¤.

    ![](https://hackmd.io/_uploads/BJCPhpCRn.png)

<br>

### 4ï¸âƒ£ ì¼ê¸° í™”ë©´ì—ì„œ ìˆ˜ì •ëœ text ë°˜ì˜í•˜ê¸°

ğŸš¨ **ë¬¸ì œì ** <br>
ë‘ë²ˆì§¸ í™”ë©´(ì¼ê¸° í™”ë©´)ì—ì„œ ì‘ì„± ë° ìˆ˜ì •ëœ textë¥¼ ì²«ë²ˆì§¸ í™”ë©´(ë¦¬ìŠ¤íŠ¸ í™”ë©´)ì— ë°˜ì˜í•´ì£¼ê¸° ìœ„í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ë“¤ì„ ì‹œë„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ CollectionViewì—ì„œ `DiffableDataSource`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ `snapshot`ì„ í™œìš©í•˜ì—¬ CollectionViewì˜ dataë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.

#### 1. FetchedResultsController
- ì ìš©
    - `FetchedResultsController`ëŠ” Core Data fetch requset ìš”ì²­ì˜ ê²°ê³¼ë¥¼ ê´€ë¦¬í•˜ê³  ì‚¬ìš©ìì—ê²Œ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì…ë‹ˆë‹¤. ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ delegateëŠ” **fetch resultsê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ** fetched results controllerê°€ í˜¸ì¶œí•  ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
    - ë©”ì„œë“œë“¤ ì¤‘ ì•„ë˜ ë©”ì„œë“œë¥¼ í™œìš©í•œë‹¤ë©´ fetch resultsê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ `ì‰½ê²Œ` snapShotì„ applyë¥¼ í•´ì¤„ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ ì ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.
    ```swift
    optional func controller(
        _ controller: NSFetchedResultsController<NSFetchRequestResult>,
        didChangeContentWith **snapshot**: NSDiffableDataSourceSnapshot
    )
    ```
    - í•˜ì§€ë§Œ í•´ë‹¹ controller ë©”ì„œë“œì˜ snapshotë¥¼ í™œìš©í•˜ë ¤ê³  í•˜ì˜€ì„ ë•Œ, applyí•˜ëŠ” ë¶€ë¶„ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ê³„ì† ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤ğŸ¥²(ì´ ë¶€ë¶„ì˜ ë¬¸ì œ í•´ê²°ì„ ìœ„í•˜ì—¬ ì˜¤ë«ë™ì•ˆ ë¶™ì¡ê³  ìˆì—ˆìœ¼ë‚˜, ê²°êµ­ ì›ì¸ì„ ì°¾ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤.) ì´ì— ë§¤ê°œë³€ìˆ˜ì˜ snapshotë¥¼ í™œìš©í•˜ëŠ” ëŒ€ì‹  ê¸°ì¡´ì— êµ¬í˜„í•´ ë†“ì€ applySnapshot()ë¥¼ í˜¸ì¶œí•˜ì˜€ìŠµë‹ˆë‹¤.
    ```
    Could not cast value of type 'NSTemporaryObjectID_default' (0x1ba22d4c8) to 'Diary.DiaryEntity' (0x104c15c10).
    ```
    
    <details>
        <summary> ì½”ë“œ ë³´ê¸° </summary>

    ```swift
    // DiaryViewController.swift
    private func applySnapshot() {
        guard let diaryDataSource,
              let fetchedObjects = fetchedResultsController?.fetchedObjects else { return }

        var snapshot = NSDiffableDataSourceSnapshot<Section, DiaryEntity>()

        snapshot.appendSections([.main])
        snapshot.appendItems(fetchedObjects)
        diaryDataSource.apply(snapshot, animatingDifferences: true)
    }
    ```
    ```swift
    // DiaryViewController.swift
    extension DiaryViewController: NSFetchedResultsControllerDelegate {
    func controller(_ controller: NSFetchedResultsController<NSFetchRequestResult>, didChangeContentWith snapshot: NSDiffableDataSourceSnapshotReference) {
        diaryDataSource?.apply(snapshot as NSDiffableDataSourceSnapshot<DiaryViewController.Section, DiaryEntity>, animatingDifferences: true)
        }
    }
    ```
    </details>  
    
- ì¥ì 
    - fetch resultsì˜ ë³€ê²½ì‹œì ì„ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë˜ì–´ ë³€ê²½í•  ë•Œ í•˜ê³  ì‹¶ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë‹¨ì 
    - `diaryDataSource?.apply(snapshot as...)` ëŒ€ì‹  ê¸°ì¡´ì— êµ¬í˜„í•´ë†“ì€ `applySnapshot`ë¥¼ í™œìš©í•˜ë©´ fetch resultsê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì²«ë²ˆì§¸ í™”ë©´ì— ë°ì´í„°ë¥¼ ë°˜ì˜í•˜ëŠ” ê²ƒì—ëŠ” ë¬¸ì œê°€ ì—†ì—ˆì§€ë§Œ, controller ë§¤ê°œë³€ìˆ˜ê°€ ì œê³µí•˜ëŠ” sanpshotë¥¼ í™œìš©í•˜ì§€ ëª»í•´ í•´ë‹¹ contorllerë¥¼ **ì‚¬ìš©í•˜ëŠ” ì˜ë¯¸ê°€ ì—†ë‹¤**ê³  íŒë‹¨í•˜ì˜€ìŠµë‹ˆë‹¤.
    - ë˜í•œ controller ê°™ì€ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ViewControllerê°€ íŠ¹ì • delegateë¥¼ ì˜ì¡´í•˜ê³  ìˆëŠ” ê²ƒì´ë¯€ë¡œ **ì˜ì¡´ì„± ë¬¸ì œ**ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.

    
#### 2. Delegate íŒ¨í„´
- ì ìš©
    <details>
        <summary> ì½”ë“œ ë³´ê¸° </summary>
        
    ```swift
    protocol DiaryDetailViewControllerDelegate: AnyObject {
        func diaryDetailViewController(_ diaryDetailViewController: DiaryDetailViewController, upsert diary: Diary)
        func diaryDetailViewController(_ diaryDetailViewController: DiaryDetailViewController, delete diary: Diary)
    } 
    ```

    ```swift
    // MARK: DiaryDetailViewController Delegate
    extension DiaryViewController: DiaryDetailViewControllerDelegate {
        func diaryDetailViewController(_ diaryDetailViewController: DiaryDetailViewController, upsert diary: Diary) {
            useCase?.upsert(diary)
            loadData()
            applySnapshot()
        }

        func diaryDetailViewController(_ diaryDetailViewController: DiaryDetailViewController, delete diary: Diary) {
            useCase?.delete(diary)
            loadData()
            applySnapshot()
        }
    }
    ```
    </details>
- ë‹¨ì  
    - `Delegate` íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ `diaryDetailViewController`ì—ì„œ `diaryViewController`ë¡œ  ë³€ê²½ëœ ë°ì´í„°ì˜ ì—…ë°ì´íŠ¸ë¥¼ ìš”ì²­í•˜ê³  `applySnapshot()`ì„ í˜¸ì¶œ í•˜ë©´ ë³´ì´ì§€ ì•ŠëŠ” ë·°ì— ëŒ€í•´ì„œ ê³„ì†í•´ì„œ `applySnapshot()`í•˜ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.


ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
#### 3. Delegate íŒ¨í„´ + viewDidAppear ë©”ì„œë“œ
- ì ìš©
    - `coreData`ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì‘ì—…ë§Œì„ `delegate`ë¥¼ í†µí•´ ì‘ì—…í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
    - `applySnapshot()`ì€ `delegate`ë¥¼ í†µí•´ì„œ í˜¸ì¶œí•˜ëŠ” ëŒ€ì‹ , `viewDidAppear` ë©”ì„œë“œ ë‚´ì—ì„œ í˜¸ì¶œí•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    <details>
        <summary> ì½”ë“œ ë³´ê¸° </summary>
        
    ```swift
    override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)
        applySnapshot()
    }
    ```
    </details>
- ì¥ì 
    - ì²«ë²ˆì§¸ í™”ë©´(ë¦¬ìŠ¤íŠ¸ í™”ë©´)ìœ¼ë¡œ ëŒì•„ê°ˆ ë•Œë§Œ `applySnapshot()`ì„ í˜¸ì¶œí•˜ë¯€ë¡œ ë³´ì´ì§€ ì•ŠëŠ” ë·°ì— ëŒ€í•´ì„œ í˜¸ì¶œí•˜ë˜ ë‹¨ì ì„ ë³´ì•ˆí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<br>

### 5ï¸âƒ£ ë°°ì—´ì— ì•ˆì „í•˜ê²Œ ì ‘ê·¼í•˜ê¸°
    
ğŸš¨ **ë¬¸ì œì ** <br>
- `didSelectItemAt`ì—ì„œ `IndexPath.item`ë¥¼ í†µí•´ `diaryList`ì— ì ‘ê·¼í• ë•Œ `diaryList` ë°ì´í„°ê°€ ë¯¸ë¦¬ ì—…ë°ì´íŠ¸ ë˜ì–´ ìˆì§€ ì•Šì„ ë•Œ `Index out of range`ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- `IndexPath.item` ë¥¼ í†µí•´ `diaryList`ë¥¼ ì ‘ê·¼í•˜ê¸° ì „ì— ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ì—…ë°ì´íŠ¸ í•˜ì§€ ì•Šì€ ê²ƒì€ íœ´ë¨¼ì—ëŸ¬ì´ì§€ë§Œ ì´ëŸ° ìƒí™©ì—ì„œë„ `Index out of range`ì—ëŸ¬ë¥¼ í†µí•œ `Crash`ë¥¼ ë§‰ê¸°ìœ„í•œ ë°©ë²•ì„ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤. 
    ```swift
    extension Collection {
        subscript (safe index: Index) -> Element? {
            return indices.contains(index) ? self[index] : nil
        }
    }   
    ```
- `Collection` íƒ€ì…ì˜ ìœ íš¨ ë²”ìœ„ë¥¼ ê°€ì§€ê³  ìˆëŠ” `indices`ë¼ëŠ” í”„ë¡œí¼í‹°ì— ëŒ€í•´ ì•Œê²Œëê³ , ì ‘ê·¼í•œ `Index`ê°€ ìœ íš¨í•  ë•ŒëŠ” `Element` íƒ€ì…ì„ ë°˜í™˜í•˜ê³  ìœ íš¨í•˜ì§€ ì•Šì„ ë•ŒëŠ” `nil`ì„ ë°˜í™˜ í•˜ë„ë¡ `subscript`ë©”ì„œë“œë¥¼ ì •ì˜ í–ˆìŠµë‹ˆë‹¤. 

<br>

### 6ï¸âƒ£ ì œëª©ì—†ì„ ë•Œ ë¦¬ìŠ¤íŠ¸ ë†’ì´ê°€ ì¤„ì–´ë“œëŠ” í˜„ìƒ
    
ğŸš¨ **ë¬¸ì œì ** <br>
- ì¼ê¸°ì¥ì˜ ì²« ì¤„ì´ ì—†ì„ë•Œ `Diary` íƒ€ì…ì˜ `title` ì†ì„±ìœ¼ë¡œ ë¹ˆ ë¬¸ìì—´ì´ ë“¤ì–´ê°ˆ ê²½ìš° ëª©ë¡ì—ì„œ `cell`ì˜ ë†’ì´ê°€ ì¤„ì–´ë“œëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>
    <img src = "https://hackmd.io/_uploads/BkuzARCAh.png" width = "400">

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- `title`ì†ì„±ì´ ë¹„ì–´ìˆì„ ê²½ìš° `ì œëª© ì—†ìŒ` í…ìŠ¤íŠ¸ë¥¼ ë„£ì–´ì£¼ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.<br>
    <img src = "https://hackmd.io/_uploads/HkjD0RRR3.png" width = "400">
    
<br>
    
### 7ï¸âƒ£ ë™ì‹œì ‘ê·¼ ë¬¸ì œ
    
ğŸš¨ **ë¬¸ì œì ** <br>
1. `DiaryDetailVeiwController`ì˜ `textViewDidEndEditing`ì—ì„œ `UseCase`ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ
2. `UseCase`ì˜ ë©”ì„œë“œì—ì„œ `UseCaseDelegate`ë¥¼ í†µí•´ `DiaryDetailVeiwControllerDelegate`ì˜ `upsert`ë©”ì„œë“œë¥¼ í˜¸ì¶œ
3. `DiaryDetailVeiwControllerDelegate` ë©”ì„œë“œì—ì„œ ë‹¤ì‹œ `UseCase`ì˜ í”„ë¡œí¼í‹°ë¡œ ì ‘ê·¼

- ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ `Simultaneous` ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    ![](https://hackmd.io/_uploads/HynGAnC03.png)
    ![](https://hackmd.io/_uploads/S1UzC3RAn.png)

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- UseCaseê°€ struct ì˜€ê¸° ë•Œë¬¸ì— UseCaseë‚´ mutating ë©”ì„œë“œê°€ í˜¸ì¶œ ë˜ë©´ UseCaseì— ëŒ€í•œ ë©”ëª¨ë¦¬ë¡œ ì§ì ‘ ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤.
- ê·¸ëŸ° ì™€ì¤‘ì— mutating ë©”ì„œë“œ ë‚´ì—ì„œ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ í†µí•´ ë‹¤ì‹œ UseCaseì— ì ‘ê·¼í–ˆê¸° ë•Œë¬¸ì— ë™ì‹œ ì ‘ê·¼ ì˜¤ë¥˜ê°€ ë‚œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì›ë˜ Testí–ˆë˜ ì½”ë“œë„ mutatingì„ ë¶™ì´ë‹ˆ ë™ì‹œ ì ‘ê·¼ ì—ëŸ¬ê°€ ë°œìƒ í–ˆìŠµë‹ˆë‹¤. 
- mutatingì„ ì§€ìš°ê±°ë‚˜ UseCaseë¥¼ Classë¡œ ë³€ê²½í–ˆì„ë•ŒëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

    <details>
            <summary> ì½”ë“œ ë³´ê¸° </summary>
      
    ```swift
    struct TestDiary {
        let content: String
    }
    
    protocol TestUseCaseDelegate: AnyObject {
        func delegateFunc()
    }
    
    struct TestUseCase {
        var testDiary: TestDiary // í˜¸ì¶œ ìˆœì„œ: 4ë²ˆ
        weak var delegate: TestUseCaseDelegate?
    
        mutating func doingTestUseCase() {
            testDiary = TestDiary(content: "ê²½ë¯¼")
            delegate?.delegateFunc() // í˜¸ì¶œ ìˆœì„œ: 2ë²ˆ
        }
    }
    
    class TestVC {
        var testUseCase: TestUseCase?
    
        init(testUseCase: TestUseCase) {
            self.testUseCase = testUseCase
        }
    
        func setupUseCaseDelegate() {
            testUseCase?.delegate = self
        }
    
        func doing() {
            testUseCase?.doingTestUseCase() // í˜¸ì¶œ ìˆœì„œ: 1ë²ˆ
        }
    }
    
    extension TestVC: TestUseCaseDelegate {
        func delegateFunc() {
            print(testUseCase?.testDiary) // í˜¸ì¶œ ìˆœì„œ: 3ë²ˆ
        }
    }
    
    let diary = TestDiary(content: "Dasan")
    let useCase = TestUseCase(testDiary: diary)
    let viewController = TestVC(testUseCase: useCase)
    
    viewController.setupUseCaseDelegate()
    viewController.doing()
    ```
    </details> 

</br>

### 8ï¸âƒ£ êµ¬ì¡° ê°œì„ 
    
ğŸš¨ **ë¬¸ì œì ** <br>
- `diaryPersistentManager`ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ `ViewController`ë¥¼ `Delegate`íŒ¨í„´ì„ ì´ìš©í•´ í†µì‹ í•˜ì˜€ì§€ë§Œ Delegateê°„ì˜ í†µì‹ ì´ ë§ì•„ì§€ë©´ì„œ **ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.**
    
    <img src = "https://github.com/YaRkyungmin/ios-diary/assets/106504779/8c42a917-dadf-415f-876e-99b5b4e22141.jpg" width = "600">

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- ê°ê°ì˜ `UseCase`ì—ì„œ `diaryPersistentManager`ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³  ìˆê²Œ í•œ ë’¤ `UseCase` ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ ì£¼ì…í•´ì¤Œìœ¼ë¡œì¨ ë³µì¡í•œ êµ¬ì¡°ë¥¼ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

    <img src = "https://github.com/YaRkyungmin/ios-diary/assets/106504779/ee8accc8-a776-4972-8d3e-af40463dc8f5.jpg" width = "600">

<br>

## ğŸ“š ì°¸ê³  ë§í¬<a id="ì°¸ê³ _ë§í¬"></a>
    
<details>
        <summary> ì°¸ê³  ë§í¬ í¼ì³ ë³´ê¸° </summary>
    
- [ğŸApple Docs: Layout](https://developer.apple.com/design/human-interface-guidelines/layout)
- [ğŸApple Docs: KeyboardLayoutGuide](https://developer.apple.com/documentation/uikit/uiview/3752221-keyboardlayoutguide)
- [ğŸApple Docs: UITextView](https://developer.apple.com/documentation/uikit/uitextview)
- [ğŸApple Docs: current](https://developer.apple.com/documentation/foundation/locale/2293654-current)
- [ğŸApple Docs: DateFormatter](https://developer.apple.com/documentation/foundation/dateformatter)
- [ğŸApple Docs: NSFetchedResultsController](https://developer.apple.com/documentation/coredata/nsfetchedresultscontroller)
- [ğŸApple Docs: NSFetchedResultsControllerDelegate](https://developer.apple.com/documentation/coredata/nsfetchedresultscontrollerdelegate)
- [ğŸApple Docs: Core Data](https://developer.apple.com/documentation/coredata)
- [ğŸApple Docs: Setting up a Core Data stack](https://developer.apple.com/documentation/coredata/setting_up_a_core_data_stack)
- [ğŸApple Docs: UITextViewDelegate](https://developer.apple.com/documentation/uikit/uitextviewdelegate)
- [ğŸApple Docs: UISwipeActionsConfiguration](https://developer.apple.com/documentation/uikit/uiswipeactionsconfiguration)
- [ğŸApple Docs: collection](https://developer.apple.com/documentation/swift/collection)
</details>

<br>

---

## ğŸ‘©â€ğŸ‘§â€ğŸ‘§ about TEAM<a id="about_TEAM"></a>

| <Img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1108927085713563708/admin.jpeg" width="100"> | ğŸ¼KyungminğŸ¼  | https://github.com/YaRkyungmin |
| -------- | :--------: | -------- |
| <Img src = "https://user-images.githubusercontent.com/106504779/253477235-ca103b42-8938-447f-9381-29d0bcf55cac.jpeg" width="100"> | **ğŸŒ³DasanğŸŒ³** | **https://github.com/DasanKim** |
